
{% extends 'base.html' %}
{% block content %}
<h2>{% if lesson %}Edit{% else %}Add New{% endif %} Lesson</h2>

<form method="POST" enctype="multipart/form-data" class="form-box">
  {{ form.hidden_tag() }}
  <div class="form-field">{{ form.title.label }}<br>{{ form.title() }}</div>
  <div class="form-field">{{ form.description.label }}<br>{{ form.description() }}</div>
  <div class="form-field">{{ form.video_url.label }}<br>{{ form.video_url() }}</div>
  <div class="form-field">{{ form.category.label }}<br>{{ form.category() }}</div>
  <div class="form-field">{{ form.pdf_files.label }}<br>{{ form.pdf_files(multiple=true) }}</div>
  <small>(Max file size: 10MB per file)</small>
  <br><br>
  <input type="submit" value="Save Lesson" class="button">
</form>

{% if lesson and lesson.files %}
  <h3>Existing Uploaded Files:</h3>
  <ul>
  {% for file in lesson.files %}
    <li>
      {{ file.filename }}
      <form method="POST" action="{{ url_for('admin.delete_file', file_id=file.id) }}" style="display:inline;">
        <button type="submit" class="button" onclick="return confirm('Delete file?')">ðŸ—‘</button>
      </form>
    </li>
  {% endfor %}
  </ul>
{% endif %}
{% endblock %}
