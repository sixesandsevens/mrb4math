
{% extends 'base.html' %}
{% block content %}
<h2>{{ lesson.title }}</h2>

<p>{{ lesson.description }}</p>

{% if lesson.video_url %}
  <div class="video-wrapper">
    {% set vimeo_id = lesson.video_url | replace('https://vimeo.com/', '') %}
    <div style="padding:66.67% 0 0 0;position:relative;">
      <iframe
        src="https://player.vimeo.com/video/{{ vimeo_id }}?badge=0&amp;autopause=0"
        frameborder="0"
        allow="autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share"
        style="position:absolute;top:0;left:0;width:100%;height:100%;"
        title="Lesson Video">
      </iframe>
    </div>
    <script src="https://player.vimeo.com/api/player.js"></script>
  </div>
{% endif %}

{% if lesson.files %}
  <h3>Resources:</h3>
  <ul>
  {% for file in lesson.files %}
    <li><a href="{{ url_for('main.download_file', filename=file.filename) }}" target="_blank">{{ file.filename }}</a></li>
  {% endfor %}
  </ul>
{% endif %}

<p><a href="{{ url_for('main.category_view', category_id=lesson.category.id) }}">Back to Category</a></p>
{% endblock %}
